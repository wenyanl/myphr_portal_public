{"ast":null,"code":"import _classCallCheck from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wenyanli/Desktop/MyPHR_Portal/src/components/Edit/editContact.js\";\nimport React, { Component } from \"react\";\nimport \"../../App.css\";\nimport { userService } from \"../../service\";\nimport { ButtonToolbar, Button, Form, InputGroup, Col } from \"react-bootstrap\";\nimport ReactPhoneInput from \"react-phone-input-2\";\nimport \"react-phone-input-2/dist/style.css\";\n/*edit components\n *auto complete addresses\n *phone number and email validators\n\n validate all forms when clicking save (before save)\n */\n\nvar EditContact =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditContact, _React$Component);\n\n  function EditContact(props, context) {\n    var _this;\n\n    _classCallCheck(this, EditContact);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditContact).call(this, props, context));\n    _this.TOKEN = JSON.parse(localStorage.getItem(\"oneUser\")).token;\n    _this.ID = JSON.parse(localStorage.getItem(\"oneUser\")).client_id;\n    var clientToEdit = JSON.parse(localStorage.getItem(\"contactInfo\"));\n    _this.state = {\n      isLoading: true,\n      client: {},\n      address: {},\n      isEditContact: false,\n      validated: false,\n      query: \"\",\n      locationId: \"\",\n      isChecked: false,\n      coords: {},\n      data: {},\n      //UPDATING........\n      phoneInfo: clientToEdit[1][1],\n      emailInfo: clientToEdit[2][1],\n      addressInfo: clientToEdit[0][1],\n      homeAddress: {},\n      mailingAddress: {},\n      otherAddress: {},\n      homePhone: {},\n      cellPhone: {},\n      newEmail: {},\n      //new input values:\n      newHA: {},\n      newMA: {},\n      newOA: {},\n      newHP: {},\n      newCP: {},\n      errors: {}\n    };\n    _this.editContact = _this.editContact.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editCancel = _this.editCancel.bind(_assertThisInitialized(_assertThisInitialized(_this))); // User has clicked the save button\n\n    _this.onCheck = _this.onCheck.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePhoneChange = _this.handlePhoneChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleOAChange = _this.handleOAChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleMAChange = _this.handleMAChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleHPChange = _this.handleHPChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleHAChange = _this.handleHAChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEChange = _this.handleEChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditContact, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var ha = this.state.addressInfo.filter(function (word) {\n        return word.type == \"home\";\n      });\n\n      if (ha.length != 0) {\n        this.setState({\n          homeAddress: ha[0].address,\n          newHA: ha[0].address\n        });\n      } else {\n        this.setState({\n          homeAddress: ha[0],\n          newHA: ha[0]\n        });\n      }\n\n      var ma = this.state.addressInfo.filter(function (word) {\n        return word.type == \"mailing\";\n      });\n\n      if (ma.length != 0) {\n        this.setState({\n          mailingAddress: ma[0].address,\n          newMA: ma[0].address\n        });\n      } else {\n        this.setState({\n          mailingAddress: ma[0],\n          newMA: ma[0]\n        });\n      }\n\n      var oa = this.state.addressInfo.filter(function (word) {\n        return word.type == \"other\";\n      });\n\n      if (oa.length != 0) {\n        this.setState({\n          otherAddress: oa[0].address,\n          newOA: oa[0].address\n        });\n      } else {\n        this.setState({\n          otherAddress: oa[0],\n          newOA: oa[0]\n        });\n      }\n\n      var cp = this.state.phoneInfo.filter(function (word) {\n        return word.type == \"cell\";\n      });\n\n      if (cp.length != 0) {\n        this.setState({\n          cellPhone: \"+\" + cp[0].country_code + \" \" + cp[0].number,\n          newCP: \"+\" + cp[0].country_code + \" \" + cp[0].number\n        });\n      } else {\n        this.setState({\n          cellPhone: cp[0],\n          newCP: cp[0]\n        });\n      }\n\n      var hp = this.state.phoneInfo.filter(function (word) {\n        return word.type == \"home\";\n      });\n\n      if (hp.length != 0) {\n        this.setState({\n          homePhone: \"+\" + hp[0].country_code + \" \" + hp[0].number,\n          newHP: \"+\" + hp[0].country_code + \" \" + hp[0].number\n        });\n      } else {\n        this.setState({\n          homePhone: hp[0],\n          newHP: hp[0]\n        });\n      }\n\n      this.setState({\n        newEmail: this.state.emailInfo\n      });\n    }\n  }, {\n    key: \"editCancel\",\n    value: function editCancel() {\n      this.setState({\n        isEditContact: false\n      });\n    }\n  }, {\n    key: \"editContact\",\n    value: function editContact() {\n      this.setState({\n        isEditContact: true\n      });\n    } //handle phone number change\n\n  }, {\n    key: \"handlePhoneChange\",\n    value: function handlePhoneChange(value) {\n      this.setState({\n        newCP: value\n      });\n    }\n  }, {\n    key: \"handleHPChange\",\n    value: function handleHPChange(value) {\n      this.setState({\n        newHP: value\n      });\n    } //handle addresses change\n\n  }, {\n    key: \"handleHAChange\",\n    value: function handleHAChange(event) {\n      this.setState({\n        newHA: event.target.value\n      });\n    }\n  }, {\n    key: \"handleMAChange\",\n    value: function handleMAChange(event) {\n      this.setState({\n        newMA: event.target.value\n      });\n    }\n  }, {\n    key: \"handleOAChange\",\n    value: function handleOAChange(event) {\n      this.setState({\n        newOA: event.target.value\n      });\n    }\n  }, {\n    key: \"handleValidation\",\n    value: function handleValidation() {\n      var email = this.state.newEmail;\n      var errors = {};\n      var formIsValid = true;\n\n      if (typeof email !== \"undefined\" && email.length > 0) {\n        var lastAtPos = email.lastIndexOf(\"@\");\n        var lastDotPos = email.lastIndexOf(\".\");\n\n        if (!(lastAtPos < lastDotPos && lastAtPos > 0 && email.indexOf(\"@@\") == -1 && lastDotPos > 2 && email.length - lastDotPos > 2)) {\n          formIsValid = false;\n          errors[\"email\"] = \"Email is not valid\";\n        }\n      }\n\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n    }\n  }, {\n    key: \"handleEChange\",\n    value: function handleEChange(e) {\n      this.setState({\n        newEmail: e.target.value\n      });\n    }\n  }, {\n    key: \"onCheck\",\n    //when validation (clicking save button)\n    value: function onCheck(event) {\n      event.preventDefault(); //validate email format\n\n      if (!this.handleValidation()) {\n        alert(\"Form has errors!\");\n      } else {\n        //call edit apis:\n        if (this.state.newHA == this.state.homeAddress) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"address\", this.state.newHA, \"home\");\n          this.setState({\n            homeAddress: this.state.newHA\n          });\n        } //mailing address\n\n\n        if (this.state.newMA == this.state.mailingAddress) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"address\", this.state.newMA, \"mailing\");\n          this.setState({\n            mailingAddress: this.state.newMA\n          });\n        } //other address\n\n\n        if (this.state.newOA == this.state.otherAddress) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"address\", this.state.newOA, \"other\");\n          this.setState({\n            otherAddress: this.state.newOA\n          });\n        } //cell phone\n\n\n        if (this.state.newCP == this.state.cellPhone) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"phone\", this.state.newCP, \"cell\");\n          this.setState({\n            cellPhone: this.state.newCP\n          });\n        } //home phone\n\n\n        if (this.state.newHP == this.state.homePhone) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"phone\", this.state.newHP, \"home\");\n          this.setState({\n            homePhone: this.state.newHP\n          });\n        } //email\n\n\n        if (this.state.newEmail == this.state.emailInfo) {} else {\n          userService.editContactInfo(this.ID, this.TOKEN, \"email\", this.state.newEmail, \"main\");\n          this.setState({\n            emailInfo: this.state.newEmail\n          });\n        }\n\n        this.setState({\n          isEditContact: false\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isEditContact = _this$state.isEditContact,\n          addressInfo = _this$state.addressInfo,\n          phoneInfo = _this$state.phoneInfo,\n          emailInfo = _this$state.emailInfo,\n          newHA = _this$state.newHA,\n          newMA = _this$state.newMA,\n          newOA = _this$state.newOA,\n          newCP = _this$state.newCP,\n          newHP = _this$state.newHP,\n          newEmail = _this$state.newEmail;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, !isEditContact ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Home Address: \"), addressInfo.map(function (a) {\n        return React.createElement(\"div\", {\n          class: \"inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, a.type == \"home\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }, \" \", a.address, \" \") : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Mailing Address: \"), addressInfo.map(function (a) {\n        return React.createElement(\"div\", {\n          class: \"inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }, a.type == \"mailing\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }, a.address) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Other Address: \"), addressInfo.map(function (a) {\n        return React.createElement(\"div\", {\n          class: \"inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }, a.type == \"other\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }, a.address) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"Cell Phone: \"), phoneInfo.map(function (p) {\n        return React.createElement(\"div\", {\n          class: \"inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314\n          },\n          __self: this\n        }, p.type == \"cell\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315\n          },\n          __self: this\n        }, p.number) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Home Phone: \"), phoneInfo.map(function (p) {\n        return React.createElement(\"div\", {\n          class: \"inline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322\n          },\n          __self: this\n        }, p.type == \"home\" ? React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }, p.number) : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323\n          },\n          __self: this\n        }));\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, \"Email: \"), emailInfo), React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.editContact,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Edit\")) : ///////////////////////////////////////EDIT ////////////////////////////////////////\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, \"Home Address:\"), \" \", React.createElement(\"input\", {\n        class: \"form-control\",\n        placeholder: \"home address\",\n        value: newHA || \"\",\n        onChange: this.handleHAChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, \"Mailing Address: \"), React.createElement(\"input\", {\n        class: \"form-control\",\n        placeholder: \"mailing address\",\n        value: newMA || \"\",\n        onChange: this.handleMAChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"Other Address: \"), \" \", React.createElement(\"input\", {\n        class: \"form-control\",\n        placeholder: \"other address\",\n        value: newOA || \"\",\n        onChange: this.handleOAChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      }, \"Cell Phone: \"), React.createElement(ReactPhoneInput, {\n        placeholder: \"Enter phone number\",\n        defaultCountry: \"ca\",\n        value: newCP || \"\",\n        onChange: this.handlePhoneChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Home Phone: \"), React.createElement(ReactPhoneInput, {\n        placeholder: \"Enter phone number\",\n        defaultCountry: \"ca\",\n        value: newHP || \"\",\n        onChange: this.handleHPChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413\n        },\n        __self: this\n      }, \"Email:\"), \" \", React.createElement(\"input\", {\n        class: \"form-control\",\n        type: \"email\",\n        value: newEmail,\n        onChange: this.handleEChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, this.state.errors[\"email\"])), React.createElement(ButtonToolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.onCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.editCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426\n        },\n        __self: this\n      }, \"Cancel\")))));\n    }\n  }]);\n\n  return EditContact;\n}(React.Component);\n\nexport default EditContact;","map":{"version":3,"sources":["/Users/wenyanli/Desktop/MyPHR_Portal/src/components/Edit/editContact.js"],"names":["React","Component","userService","ButtonToolbar","Button","Form","InputGroup","Col","ReactPhoneInput","EditContact","props","context","TOKEN","JSON","parse","localStorage","getItem","token","ID","client_id","clientToEdit","state","isLoading","client","address","isEditContact","validated","query","locationId","isChecked","coords","data","phoneInfo","emailInfo","addressInfo","homeAddress","mailingAddress","otherAddress","homePhone","cellPhone","newEmail","newHA","newMA","newOA","newHP","newCP","errors","editContact","bind","editCancel","onCheck","handlePhoneChange","handleOAChange","handleMAChange","handleHPChange","handleHAChange","handleEChange","ha","filter","word","type","length","setState","ma","oa","cp","country_code","number","hp","value","event","target","email","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","e","preventDefault","handleValidation","alert","editContactInfo","map","a","p"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../../App.css\";\nimport { userService } from \"../../service\";\nimport { ButtonToolbar, Button, Form, InputGroup, Col } from \"react-bootstrap\";\nimport ReactPhoneInput from \"react-phone-input-2\";\nimport \"react-phone-input-2/dist/style.css\";\n\n/*edit components\n *auto complete addresses\n *phone number and email validators\n\n validate all forms when clicking save (before save)\n */\nclass EditContact extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    const clientToEdit = JSON.parse(localStorage.getItem(\"contactInfo\"));\n    this.state = {\n      isLoading: true,\n      client: {},\n      address: {},\n      isEditContact: false,\n      validated: false,\n      query: \"\",\n      locationId: \"\",\n      isChecked: false,\n      coords: {},\n      data: {},\n\n      //UPDATING........\n      phoneInfo: clientToEdit[1][1],\n      emailInfo: clientToEdit[2][1],\n      addressInfo: clientToEdit[0][1],\n      homeAddress: {},\n      mailingAddress: {},\n      otherAddress: {},\n      homePhone: {},\n      cellPhone: {},\n      newEmail: {},\n\n      //new input values:\n      newHA: {},\n      newMA: {},\n      newOA: {},\n      newHP: {},\n      newCP: {},\n\n      errors: {}\n    };\n    this.editContact = this.editContact.bind(this);\n    this.editCancel = this.editCancel.bind(this);\n\n    // User has clicked the save button\n    this.onCheck = this.onCheck.bind(this);\n\n    this.handlePhoneChange = this.handlePhoneChange.bind(this);\n    this.handleOAChange = this.handleOAChange.bind(this);\n    this.handleMAChange = this.handleMAChange.bind(this);\n    this.handleHPChange = this.handleHPChange.bind(this);\n    this.handleHAChange = this.handleHAChange.bind(this);\n\n    this.handleEChange = this.handleEChange.bind(this);\n  }\n\n  componentDidMount() {\n    const ha = this.state.addressInfo.filter(word => word.type == \"home\");\n    if (ha.length != 0) {\n      this.setState({ homeAddress: ha[0].address, newHA: ha[0].address });\n    } else {\n      this.setState({ homeAddress: ha[0], newHA: ha[0] });\n    }\n\n    const ma = this.state.addressInfo.filter(word => word.type == \"mailing\");\n    if (ma.length != 0) {\n      this.setState({ mailingAddress: ma[0].address, newMA: ma[0].address });\n    } else {\n      this.setState({ mailingAddress: ma[0], newMA: ma[0] });\n    }\n\n    const oa = this.state.addressInfo.filter(word => word.type == \"other\");\n    if (oa.length != 0) {\n      this.setState({ otherAddress: oa[0].address, newOA: oa[0].address });\n    } else {\n      this.setState({ otherAddress: oa[0], newOA: oa[0] });\n    }\n\n    const cp = this.state.phoneInfo.filter(word => word.type == \"cell\");\n    if (cp.length != 0) {\n      this.setState({\n        cellPhone: \"+\" + cp[0].country_code + \" \" + cp[0].number,\n        newCP: \"+\" + cp[0].country_code + \" \" + cp[0].number\n      });\n    } else {\n      this.setState({ cellPhone: cp[0], newCP: cp[0] });\n    }\n\n    const hp = this.state.phoneInfo.filter(word => word.type == \"home\");\n    if (hp.length != 0) {\n      this.setState({\n        homePhone: \"+\" + hp[0].country_code + \" \" + hp[0].number,\n        newHP: \"+\" + hp[0].country_code + \" \" + hp[0].number\n      });\n    } else {\n      this.setState({ homePhone: hp[0], newHP: hp[0] });\n    }\n\n    this.setState({ newEmail: this.state.emailInfo });\n  }\n  editCancel() {\n    this.setState({\n      isEditContact: false\n    });\n  }\n\n  editContact() {\n    this.setState({\n      isEditContact: true\n    });\n  }\n\n  //handle phone number change\n  handlePhoneChange(value) {\n    this.setState({\n      newCP: value\n    });\n  }\n  handleHPChange(value) {\n    this.setState({\n      newHP: value\n    });\n  }\n  //handle addresses change\n  handleHAChange(event) {\n    this.setState({ newHA: event.target.value });\n  }\n  handleMAChange(event) {\n    this.setState({ newMA: event.target.value });\n  }\n  handleOAChange(event) {\n    this.setState({ newOA: event.target.value });\n  }\n\n  handleValidation() {\n    let email = this.state.newEmail;\n\n    let errors = {};\n    let formIsValid = true;\n\n    if (typeof email !== \"undefined\" && email.length > 0) {\n      let lastAtPos = email.lastIndexOf(\"@\");\n      let lastDotPos = email.lastIndexOf(\".\");\n\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          email.indexOf(\"@@\") == -1 &&\n          lastDotPos > 2 &&\n          email.length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        errors[\"email\"] = \"Email is not valid\";\n      }\n    }\n\n    this.setState({ errors: errors });\n    return formIsValid;\n  }\n\n  handleEChange(e) {\n    this.setState({ newEmail: e.target.value });\n  }\n\n  TOKEN = JSON.parse(localStorage.getItem(\"oneUser\")).token;\n  ID = JSON.parse(localStorage.getItem(\"oneUser\")).client_id;\n  //when validation (clicking save button)\n  onCheck(event) {\n    event.preventDefault();\n\n    //validate email format\n    if (!this.handleValidation()) {\n      alert(\"Form has errors!\");\n    } else {\n      //call edit apis:\n      if (this.state.newHA == this.state.homeAddress) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"address\",\n          this.state.newHA,\n          \"home\"\n        );\n        this.setState({ homeAddress: this.state.newHA });\n      }\n\n      //mailing address\n      if (this.state.newMA == this.state.mailingAddress) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"address\",\n          this.state.newMA,\n          \"mailing\"\n        );\n        this.setState({ mailingAddress: this.state.newMA });\n      }\n\n      //other address\n      if (this.state.newOA == this.state.otherAddress) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"address\",\n          this.state.newOA,\n          \"other\"\n        );\n        this.setState({ otherAddress: this.state.newOA });\n      }\n\n      //cell phone\n      if (this.state.newCP == this.state.cellPhone) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"phone\",\n          this.state.newCP,\n          \"cell\"\n        );\n        this.setState({ cellPhone: this.state.newCP });\n      }\n      //home phone\n      if (this.state.newHP == this.state.homePhone) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"phone\",\n          this.state.newHP,\n          \"home\"\n        );\n        this.setState({ homePhone: this.state.newHP });\n      }\n\n      //email\n      if (this.state.newEmail == this.state.emailInfo) {\n      } else {\n        userService.editContactInfo(\n          this.ID,\n          this.TOKEN,\n          \"email\",\n          this.state.newEmail,\n          \"main\"\n        );\n        this.setState({ emailInfo: this.state.newEmail });\n      }\n\n      this.setState({ isEditContact: false });\n    }\n  }\n\n  render() {\n    const {\n      isEditContact,\n      addressInfo,\n      phoneInfo,\n      emailInfo,\n\n      newHA,\n      newMA,\n      newOA,\n      newCP,\n      newHP,\n      newEmail\n    } = this.state;\n\n    return (\n      <div>\n        {!isEditContact ? (\n          <div>\n            <p>\n              <strong>Home Address: </strong>\n              {addressInfo.map(a => (\n                <div class=\"inline\">\n                  {a.type == \"home\" ? <div> {a.address} </div> : <div />}\n                </div>\n              ))}\n            </p>\n\n            <p>\n              <strong>Mailing Address: </strong>\n\n              {addressInfo.map(a => (\n                <div class=\"inline\">\n                  {a.type == \"mailing\" ? <div>{a.address}</div> : <div />}\n                </div>\n              ))}\n            </p>\n            <p>\n              <strong>Other Address: </strong>\n              {addressInfo.map(a => (\n                <div class=\"inline\">\n                  {a.type == \"other\" ? <div>{a.address}</div> : <div />}\n                </div>\n              ))}\n            </p>\n            <p>\n              <strong>Cell Phone: </strong>\n              {phoneInfo.map(p => (\n                <div class=\"inline\">\n                  {p.type == \"cell\" ? <div>{p.number}</div> : <div />}\n                </div>\n              ))}\n            </p>\n            <p>\n              <strong>Home Phone: </strong>\n              {phoneInfo.map(p => (\n                <div class=\"inline\">\n                  {p.type == \"home\" ? <div>{p.number}</div> : <div />}\n                </div>\n              ))}\n            </p>\n            <p>\n              <strong>Email: </strong>\n              {emailInfo}\n            </p>\n\n            <Button variant=\"outline-primary\" onClick={this.editContact}>\n              Edit\n            </Button>\n          </div>\n        ) : (\n          ///////////////////////////////////////EDIT ////////////////////////////////////////\n          <div>\n            <p>\n              <strong>Home Address:</strong>{\" \"}\n              <input\n                class=\"form-control\"\n                placeholder=\"home address\"\n                value={newHA || \"\"}\n                onChange={this.handleHAChange}\n              />\n              {/**\n\n                <AddressSuggest\n                  query={this.state.query}\n                  value={address.street_number}\n                  onChange={this.onQuery}\n                  placeholder={address.street_number}\n                />\n                <input placeholder=\"city\" value={address.city} /> ,{\" \"}\n                <input placeholder=\"country\" value={address.country} />,{\" \"}\n                <input placeholder=\"postal code\" value={address.postalCode} />\n                \n          <AddressInput\n            street={this.state.address.street}\n            city={this.state.address.city}\n            state={this.state.address.state}\n            postalCode={this.state.address.postalCode}\n            country={this.state.address.country}\n            onChange={this.onAddressChange}\n          />\n           <br />\n                {result}*/}\n            </p>\n\n            <p>\n              <strong>Mailing Address: </strong>\n              <input\n                class=\"form-control\"\n                placeholder=\"mailing address\"\n                value={newMA || \"\"}\n                onChange={this.handleMAChange}\n              />\n            </p>\n            <p>\n              <strong>Other Address: </strong>{\" \"}\n              <input\n                class=\"form-control\"\n                placeholder=\"other address\"\n                value={newOA || \"\"}\n                onChange={this.handleOAChange}\n              />\n            </p>\n            <p>\n              <strong>Cell Phone: </strong>\n\n              <ReactPhoneInput\n                placeholder=\"Enter phone number\"\n                defaultCountry={\"ca\"}\n                value={newCP || \"\"}\n                onChange={this.handlePhoneChange}\n              />\n            </p>\n\n            <p>\n              <strong>Home Phone: </strong>\n\n              <ReactPhoneInput\n                placeholder=\"Enter phone number\"\n                defaultCountry={\"ca\"}\n                value={newHP || \"\"}\n                onChange={this.handleHPChange}\n              />\n            </p>\n\n            <p>\n              <p>\n                <strong>Email:</strong>{\" \"}\n                <input\n                  class=\"form-control\"\n                  type=\"email\"\n                  value={newEmail}\n                  onChange={this.handleEChange}\n                />\n                <span className=\"error\">{this.state.errors[\"email\"]}</span>\n              </p>\n              <ButtonToolbar>\n                <Button variant=\"outline-primary\" onClick={this.onCheck}>\n                  Save\n                </Button>\n                <Button variant=\"outline-primary\" onClick={this.editCancel}>\n                  Cancel\n                </Button>\n              </ButtonToolbar>\n            </p>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default EditContact;\n"]},"metadata":{},"sourceType":"module"}