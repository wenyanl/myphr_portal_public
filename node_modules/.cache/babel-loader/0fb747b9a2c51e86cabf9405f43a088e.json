{"ast":null,"code":"import _classCallCheck from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wenyanli/Desktop/MyPHR_Portal/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wenyanli/Desktop/MyPHR_Portal/src/components/Edit/basicInfo.js\";\nimport React from \"react\";\nimport \"../../App.css\";\nimport { userService } from \"../../service\";\nimport { ButtonToolbar, Button } from \"react-bootstrap\";\n/**\n * Profile Basic Info subpage\n * patients are allowed to edit service language\n * contains retrieving caregiver info to benefit EditCaregivers Component\n */\n\nvar BasicInfo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BasicInfo, _React$Component);\n\n  function BasicInfo(props, context) {\n    var _this;\n\n    _classCallCheck(this, BasicInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BasicInfo).call(this, props, context));\n    _this.TOKEN = JSON.parse(localStorage.getItem(\"oneUser\")).token;\n    var clientToEdit = JSON.parse(localStorage.getItem(\"basicInfo\"));\n    var caregiverToEdit = JSON.parse(localStorage.getItem(\"caregiver\"));\n    _this.state = {\n      basic: {\n        client_id: clientToEdit.client_id,\n        firstname: clientToEdit.firstname,\n        surname: clientToEdit.surname,\n        dob: clientToEdit.dob,\n        gender: clientToEdit.gender,\n        last_access_date: clientToEdit.last_access_date,\n        service_language: clientToEdit.service_language,\n        hcn: clientToEdit.hcn,\n        name: clientToEdit.name,\n        start_date: clientToEdit.start_date\n      },\n      isEditBasic: false,\n      newLanguage: clientToEdit.service_language,\n      caregiver: caregiverToEdit,\n      caregiverPID: \"\"\n    };\n    _this.editCancel = _this.editCancel.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editBasic = _this.editBasic.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(BasicInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //primary caregiver\n      var result = this.state.caregiver.filter(function (word) {\n        return word.is_primary == true;\n      });\n      var d = [];\n\n      for (var i = 0; i < result.length; i++) {\n        d.push(result[i].client_id);\n      }\n\n      this.setState({\n        caregiverPID: d\n      }); //save primary caregiver in local storage\n\n      userService.getCaregiverContactInfo(JSON.parse(localStorage.getItem(\"oneUser\")).client_id, JSON.parse(localStorage.getItem(\"oneUser\")).token, 1, this.state.caregiverPID).then(function (data) {\n        _this2.setState({\n          caregiverAddresses: data[0][1],\n          caregiverPhones: data[1][1],\n          caregiverEmails: data[2][1]\n        });\n      }); ////////////////\n\n      userService.getHealthProfile(JSON.parse(localStorage.getItem(\"oneUser\")).client_id, JSON.parse(localStorage.getItem(\"oneUser\")).token).then(function (data) {\n        return _this2.setState({\n          healthProfile: data\n        });\n      });\n      userService.getContactInfo(JSON.parse(localStorage.getItem(\"oneUser\")).client_id, 1, JSON.parse(localStorage.getItem(\"oneUser\")).token).then(function (data) {\n        return _this2.setState({\n          contactInfo: data\n        });\n      });\n      userService.getCaregiver(JSON.parse(localStorage.getItem(\"oneUser\")).client_id, JSON.parse(localStorage.getItem(\"oneUser\")).token, 1).then(function (data) {\n        return _this2.setState({\n          caregiver: data\n        });\n      });\n      userService.getPhysician(JSON.parse(localStorage.getItem(\"oneUser\")).client_id, JSON.parse(localStorage.getItem(\"oneUser\")).token, 1).then(function (data) {\n        return _this2.setState({\n          physician: data\n        });\n      });\n    }\n  }, {\n    key: \"editBasic\",\n    value: function editBasic() {\n      this.setState({\n        isEditBasic: true\n      });\n    }\n  }, {\n    key: \"editCancel\",\n    value: function editCancel() {\n      this.setState({\n        isEditBasic: false,\n        newLanguage: this.state.service_language\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState({\n        newLanguage: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      this.setState({\n        isEditBasic: false\n      });\n      userService.updateLanguage(this.state.basic.client_id, this.TOKEN, this.state.newLanguage);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state$basic = this.state.basic,\n          firstname = _this$state$basic.firstname,\n          surname = _this$state$basic.surname,\n          dob = _this$state$basic.dob,\n          gender = _this$state$basic.gender,\n          last_access_date = _this$state$basic.last_access_date,\n          service_language = _this$state$basic.service_language;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, !this.state.isEditBasic ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \" \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, firstname, \" \", surname)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Date of Birth:\"), \" \", dob), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \" \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Gender: \"), gender), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \" \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Service Language: \"), \" \", service_language), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \" \", React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Last Access: \"), last_access_date), React.createElement(Button, {\n        class: \"buttons\",\n        variant: \"outline-primary\",\n        onClick: this.editBasic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, \"Edit\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, firstname, \" \", surname)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Date of Birth:\"), \" \", dob), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Gender:\"), \" \", gender), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Service Language:\"), \" \", React.createElement(\"select\", {\n        value: this.state.newLanguage,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"English\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"English\"), React.createElement(\"option\", {\n        value: \"French\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"French\"))), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"Last Access:\"), \" \", last_access_date), React.createElement(ButtonToolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Save\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.editCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"Cancel\"))));\n    }\n  }]);\n\n  return BasicInfo;\n}(React.Component);\n\nexport default BasicInfo;","map":{"version":3,"sources":["/Users/wenyanli/Desktop/MyPHR_Portal/src/components/Edit/basicInfo.js"],"names":["React","userService","ButtonToolbar","Button","BasicInfo","props","context","TOKEN","JSON","parse","localStorage","getItem","token","clientToEdit","caregiverToEdit","state","basic","client_id","firstname","surname","dob","gender","last_access_date","service_language","hcn","name","start_date","isEditBasic","newLanguage","caregiver","caregiverPID","editCancel","bind","editBasic","handleChange","handleSubmit","result","filter","word","is_primary","d","i","length","push","setState","getCaregiverContactInfo","then","data","caregiverAddresses","caregiverPhones","caregiverEmails","getHealthProfile","healthProfile","getContactInfo","contactInfo","getCaregiver","getPhysician","physician","event","target","value","preventDefault","updateLanguage","Component"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,aAAT,EAAwBC,MAAxB,QAAsC,iBAAtC;AAEA;;;;;;IAMMC,S;;;;;AACJ,qBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,mFAAMD,KAAN,EAAaC,OAAb;AAD0B,UAoH5BC,KApH4B,GAoHpBC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KApHxB;AAG1B,QAAMC,YAAY,GAAGL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAArB;AACA,QAAMG,eAAe,GAAGN,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAxB;AAEA,UAAKI,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE;AACLC,QAAAA,SAAS,EAAEJ,YAAY,CAACI,SADnB;AAELC,QAAAA,SAAS,EAAEL,YAAY,CAACK,SAFnB;AAGLC,QAAAA,OAAO,EAAEN,YAAY,CAACM,OAHjB;AAILC,QAAAA,GAAG,EAAEP,YAAY,CAACO,GAJb;AAKLC,QAAAA,MAAM,EAAER,YAAY,CAACQ,MALhB;AAMLC,QAAAA,gBAAgB,EAAET,YAAY,CAACS,gBAN1B;AAOLC,QAAAA,gBAAgB,EAAEV,YAAY,CAACU,gBAP1B;AAQLC,QAAAA,GAAG,EAAEX,YAAY,CAACW,GARb;AASLC,QAAAA,IAAI,EAAEZ,YAAY,CAACY,IATd;AAULC,QAAAA,UAAU,EAAEb,YAAY,CAACa;AAVpB,OADI;AAaXC,MAAAA,WAAW,EAAE,KAbF;AAcXC,MAAAA,WAAW,EAAEf,YAAY,CAACU,gBAdf;AAeXM,MAAAA,SAAS,EAAEf,eAfA;AAgBXgB,MAAAA,YAAY,EAAE;AAhBH,KAAb;AAmBA,UAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,uDAAlB;AACA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,uDAAjB;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,uDAApB;AACA,UAAKG,YAAL,GAAoB,MAAKA,YAAL,CAAkBH,IAAlB,uDAApB;AA5B0B;AA6B3B;;;;wCAEmB;AAAA;;AAClB;AACA,UAAMI,MAAM,GAAG,KAAKrB,KAAL,CAAWc,SAAX,CAAqBQ,MAArB,CAA4B,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,UAAL,IAAmB,IAAvB;AAAA,OAAhC,CAAf;AACA,UAAIC,CAAC,GAAG,EAAR;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACM,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCD,QAAAA,CAAC,CAACG,IAAF,CAAOP,MAAM,CAACK,CAAD,CAAN,CAAUxB,SAAjB;AACD;;AAED,WAAK2B,QAAL,CAAc;AACZd,QAAAA,YAAY,EAAEU;AADF,OAAd,EARkB,CAYlB;;AACAvC,MAAAA,WAAW,CACR4C,uBADH,CAEIrC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CM,SAFhD,EAGIT,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KAHhD,EAII,CAJJ,EAKI,KAAKG,KAAL,CAAWe,YALf,EAQGgB,IARH,CAQQ,UAAAC,IAAI,EAAI;AACZ,QAAA,MAAI,CAACH,QAAL,CAAc;AACZI,UAAAA,kBAAkB,EAAED,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CADR;AAEZE,UAAAA,eAAe,EAAEF,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAFL;AAGZG,UAAAA,eAAe,EAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR;AAHL,SAAd;AAKD,OAdH,EAbkB,CA6BlB;;AACA9C,MAAAA,WAAW,CACRkD,gBADH,CAEI3C,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CM,SAFhD,EAGIT,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KAHhD,EAKGkC,IALH,CAKQ,UAAAC,IAAI;AAAA,eAAI,MAAI,CAACH,QAAL,CAAc;AAAEQ,UAAAA,aAAa,EAAEL;AAAjB,SAAd,CAAJ;AAAA,OALZ;AAOA9C,MAAAA,WAAW,CACRoD,cADH,CAEI7C,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CM,SAFhD,EAGI,CAHJ,EAIIT,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KAJhD,EAMGkC,IANH,CAMQ,UAAAC,IAAI;AAAA,eACR,MAAI,CAACH,QAAL,CAAc;AACZU,UAAAA,WAAW,EAAEP;AADD,SAAd,CADQ;AAAA,OANZ;AAYA9C,MAAAA,WAAW,CACRsD,YADH,CAEI/C,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CM,SAFhD,EAGIT,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KAHhD,EAII,CAJJ,EAMGkC,IANH,CAMQ,UAAAC,IAAI;AAAA,eAAI,MAAI,CAACH,QAAL,CAAc;AAAEf,UAAAA,SAAS,EAAEkB;AAAb,SAAd,CAAJ;AAAA,OANZ;AAQA9C,MAAAA,WAAW,CACRuD,YADH,CAEIhD,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CM,SAFhD,EAGIT,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,EAA4CC,KAHhD,EAII,CAJJ,EAMGkC,IANH,CAMQ,UAAAC,IAAI;AAAA,eACR,MAAI,CAACH,QAAL,CAAc;AACZa,UAAAA,SAAS,EAAEV;AADC,SAAd,CADQ;AAAA,OANZ;AAWD;;;gCACW;AACV,WAAKH,QAAL,CAAc;AACZjB,QAAAA,WAAW,EAAE;AADD,OAAd;AAGD;;;iCACY;AACX,WAAKiB,QAAL,CAAc;AACZjB,QAAAA,WAAW,EAAE,KADD;AAEZC,QAAAA,WAAW,EAAE,KAAKb,KAAL,CAAWQ;AAFZ,OAAd;AAID;;;iCACYmC,K,EAAO;AAClB,WAAKd,QAAL,CAAc;AACZhB,QAAAA,WAAW,EAAE8B,KAAK,CAACC,MAAN,CAAaC;AADd,OAAd;AAGD;;;iCAEYF,K,EAAO;AAClBA,MAAAA,KAAK,CAACG,cAAN;AACA,WAAKjB,QAAL,CAAc;AACZjB,QAAAA,WAAW,EAAE;AADD,OAAd;AAGA1B,MAAAA,WAAW,CAAC6D,cAAZ,CACE,KAAK/C,KAAL,CAAWC,KAAX,CAAiBC,SADnB,EAEE,KAAKV,KAFP,EAGE,KAAKQ,KAAL,CAAWa,WAHb;AAKD;;;6BACQ;AAAA,8BAQH,KAAKb,KAAL,CAAWC,KARR;AAAA,UAELE,SAFK,qBAELA,SAFK;AAAA,UAGLC,OAHK,qBAGLA,OAHK;AAAA,UAILC,GAJK,qBAILA,GAJK;AAAA,UAKLC,MALK,qBAKLA,MALK;AAAA,UAMLC,gBANK,qBAMLA,gBANK;AAAA,UAOLC,gBAPK,qBAOLA,gBAPK;AAUP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,KAAKR,KAAL,CAAWY,WAAZ,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,SADH,OACeC,OADf,CAFF,CADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,OACmCC,GADnC,CAPF,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGGC,MAHH,CAVF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAFF,OAEuCE,gBAFvC,CAfF,EAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,GADH,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAFF,EAGGD,gBAHH,CAnBF,EAyBE,oBAAC,MAAD;AACE,QAAA,KAAK,EAAC,SADR;AAEE,QAAA,OAAO,EAAC,iBAFV;AAGE,QAAA,OAAO,EAAE,KAAKW,SAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBF,CADD,GAmCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGf,SADH,OACeC,OADf,CADF,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,OACmCC,GADnC,CANF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,OAC4BC,MAD5B,CATF,EAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EACqC,GADrC,EAEE;AACE,QAAA,KAAK,EAAE,KAAKN,KAAL,CAAWa,WADpB;AAEE,QAAA,QAAQ,EAAE,KAAKM,YAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE;AAAQ,QAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAJF,EAKE;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,CAFF,CAZF,EAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,OACiCZ,gBADjC,CAtBF,EAyBE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,iBAAhB;AAAkC,QAAA,OAAO,EAAE,KAAKa,YAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,EAKE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,iBAAhB;AAAkC,QAAA,OAAO,EAAE,KAAKJ,UAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,CAzBF,CApCJ,CADF;AA2ED;;;;EAtNqB/B,KAAK,CAAC+D,S;;AAyN9B,eAAe3D,SAAf","sourcesContent":["import React from \"react\";\nimport \"../../App.css\";\nimport { userService } from \"../../service\";\nimport { ButtonToolbar, Button } from \"react-bootstrap\";\n\n/**\n * Profile Basic Info subpage\n * patients are allowed to edit service language\n * contains retrieving caregiver info to benefit EditCaregivers Component\n */\n\nclass BasicInfo extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n\n    const clientToEdit = JSON.parse(localStorage.getItem(\"basicInfo\"));\n    const caregiverToEdit = JSON.parse(localStorage.getItem(\"caregiver\"));\n\n    this.state = {\n      basic: {\n        client_id: clientToEdit.client_id,\n        firstname: clientToEdit.firstname,\n        surname: clientToEdit.surname,\n        dob: clientToEdit.dob,\n        gender: clientToEdit.gender,\n        last_access_date: clientToEdit.last_access_date,\n        service_language: clientToEdit.service_language,\n        hcn: clientToEdit.hcn,\n        name: clientToEdit.name,\n        start_date: clientToEdit.start_date\n      },\n      isEditBasic: false,\n      newLanguage: clientToEdit.service_language,\n      caregiver: caregiverToEdit,\n      caregiverPID: \"\"\n    };\n\n    this.editCancel = this.editCancel.bind(this);\n    this.editBasic = this.editBasic.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    //primary caregiver\n    const result = this.state.caregiver.filter(word => word.is_primary == true);\n    var d = [];\n    for (let i = 0; i < result.length; i++) {\n      d.push(result[i].client_id);\n    }\n\n    this.setState({\n      caregiverPID: d\n    });\n\n    //save primary caregiver in local storage\n    userService\n      .getCaregiverContactInfo(\n        JSON.parse(localStorage.getItem(\"oneUser\")).client_id,\n        JSON.parse(localStorage.getItem(\"oneUser\")).token,\n        1,\n        this.state.caregiverPID\n      )\n\n      .then(data => {\n        this.setState({\n          caregiverAddresses: data[0][1],\n          caregiverPhones: data[1][1],\n          caregiverEmails: data[2][1]\n        });\n      });\n\n    ////////////////\n    userService\n      .getHealthProfile(\n        JSON.parse(localStorage.getItem(\"oneUser\")).client_id,\n        JSON.parse(localStorage.getItem(\"oneUser\")).token\n      )\n      .then(data => this.setState({ healthProfile: data }));\n\n    userService\n      .getContactInfo(\n        JSON.parse(localStorage.getItem(\"oneUser\")).client_id,\n        1,\n        JSON.parse(localStorage.getItem(\"oneUser\")).token\n      )\n      .then(data =>\n        this.setState({\n          contactInfo: data\n        })\n      );\n\n    userService\n      .getCaregiver(\n        JSON.parse(localStorage.getItem(\"oneUser\")).client_id,\n        JSON.parse(localStorage.getItem(\"oneUser\")).token,\n        1\n      )\n      .then(data => this.setState({ caregiver: data }));\n\n    userService\n      .getPhysician(\n        JSON.parse(localStorage.getItem(\"oneUser\")).client_id,\n        JSON.parse(localStorage.getItem(\"oneUser\")).token,\n        1\n      )\n      .then(data =>\n        this.setState({\n          physician: data\n        })\n      );\n  }\n  editBasic() {\n    this.setState({\n      isEditBasic: true\n    });\n  }\n  editCancel() {\n    this.setState({\n      isEditBasic: false,\n      newLanguage: this.state.service_language\n    });\n  }\n  handleChange(event) {\n    this.setState({\n      newLanguage: event.target.value\n    });\n  }\n  TOKEN = JSON.parse(localStorage.getItem(\"oneUser\")).token;\n  handleSubmit(event) {\n    event.preventDefault();\n    this.setState({\n      isEditBasic: false\n    });\n    userService.updateLanguage(\n      this.state.basic.client_id,\n      this.TOKEN,\n      this.state.newLanguage\n    );\n  }\n  render() {\n    const {\n      firstname,\n      surname,\n      dob,\n      gender,\n      last_access_date,\n      service_language\n    } = this.state.basic;\n\n    return (\n      <div>\n        {!this.state.isEditBasic ? (\n          <div>\n            <p>\n              {\" \"}\n              <strong>\n                {firstname} {surname}\n              </strong>\n            </p>\n            <p>\n              <strong>Date of Birth:</strong> {dob}\n            </p>\n            <p>\n              {\" \"}\n              <strong>Gender: </strong>\n              {gender}\n            </p>\n            <p>\n              {\" \"}\n              <strong>Service Language: </strong> {service_language}\n            </p>\n            <p>\n              {\" \"}\n              <strong>Last Access: </strong>\n              {last_access_date}\n            </p>\n\n            <Button\n              class=\"buttons\"\n              variant=\"outline-primary\"\n              onClick={this.editBasic}\n            >\n              Edit\n            </Button>\n          </div>\n        ) : (\n          <div>\n            <p>\n              <strong>\n                {firstname} {surname}\n              </strong>\n            </p>\n            <p>\n              <strong>Date of Birth:</strong> {dob}\n            </p>\n            <p>\n              <strong>Gender:</strong> {gender}\n            </p>\n            <p>\n              <strong>Service Language:</strong>{\" \"}\n              <select\n                value={this.state.newLanguage}\n                onChange={this.handleChange}\n              >\n                <option value=\"English\">English</option>\n                <option value=\"French\">French</option>\n              </select>\n            </p>\n            <p>\n              <strong>Last Access:</strong> {last_access_date}\n            </p>\n            <ButtonToolbar>\n              <Button variant=\"outline-primary\" onClick={this.handleSubmit}>\n                Save\n              </Button>\n              <br />\n              <Button variant=\"outline-primary\" onClick={this.editCancel}>\n                Cancel\n              </Button>\n            </ButtonToolbar>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default BasicInfo;\n"]},"metadata":{},"sourceType":"module"}